csingh1@cvluawsbisam1:/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT> bash -x ./cluster_space_check.sh All
+ export SERVER_NAME=All
+ SERVER_NAME=All
+ export SERVER_PORT=
+ SERVER_PORT=
+ export DB_NAME=
+ DB_NAME=
+ export SCHEMA_NAME=
+ SCHEMA_NAME=
+ export THRESHOLD=9900
+ THRESHOLD=9900
+ export CRITICAL_PERCENTAGE=
+ CRITICAL_PERCENTAGE=
+ export WARNING_PERCENTAGE=
+ WARNING_PERCENTAGE=
+ export TYPE_OF_REPORT=
+ TYPE_OF_REPORT=
+ export USER_NAME=
+ USER_NAME=
+ export PASS_WORD=
+ PASS_WORD=
++ which psql
+ export PSQL=/usr/bin/psql
+ PSQL=/usr/bin/psql
++ which awk
+ export AWK=/bin/awk
+ AWK=/bin/awk
+ export SERVER_PORT=
+ SERVER_PORT=
+ export PGPASSWORD=
+ PGPASSWORD=
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
++ which tail
+ export TAIL=/usr/bin/tail
+ TAIL=/usr/bin/tail
++ which cut
+ export CUT=/bin/cut
+ CUT=/bin/cut
+ export THRESHOLD=9900
+ THRESHOLD=9900
+ export filename=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/redshift-id-pass
+ filename=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/redshift-id-pass
+ case "$1" in
+ '[' 1 -eq 1 ']'
+ declare -a myArray
+ myArray=(`cat "$filename"`)
++ cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/redshift-id-pass
+ IFS=:
+ read -r -a myArray
+ echo ./cluster_space_check.sh 'Server_Name, rs_user_name, rs_user_password, database_name, port_number, schema_name, threshold_warning_percentage'
./cluster_space_check.sh Server_Name, rs_user_name, rs_user_password, database_name, port_number, schema_name, threshold_warning_percentage
+ echo ./cluster_space_check.sh rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com csingh1 CSingh_d3v cvrsamd 5453 workmsmgr 30
./cluster_space_check.sh rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com csingh1 CSingh_d3v cvrsamd 5453 workmsmgr 30
+ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/space_check.sh rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com csingh1 CSingh_d3v cvrsamd 5453 workmsmgr 30
+ export SERVER_NAME=rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com
+ SERVER_NAME=rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export USER_NAME=csingh1
+ USER_NAME=csingh1
+ export PASS_WORD=CSingh_d3v
+ PASS_WORD=CSingh_d3v
+ export DB_NAME=cvrsamd
+ DB_NAME=cvrsamd
++ which psql
+ export PSQL=/usr/bin/psql
+ PSQL=/usr/bin/psql
++ which awk
+ export AWK=/bin/awk
+ AWK=/bin/awk
+ export SERVER_PORT=5453
+ SERVER_PORT=5453
++ which mail
+ export MAIL=/bin/mail
+ MAIL=/bin/mail
+ export PGPASSWORD=CSingh_d3v
+ PGPASSWORD=CSingh_d3v
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
++ which tail
+ export TAIL=/usr/bin/tail
+ TAIL=/usr/bin/tail
++ which cut
+ export CUT=/bin/cut
+ CUT=/bin/cut
+ export THRESHOLD=30
+ THRESHOLD=30
+ export SCHEMA_NAME=workmsmgr
+ SCHEMA_NAME=workmsmgr
++ which sed
+ export SED=/bin/sed
+ SED=/bin/sed
++ which chmod
+ export CHMOD=/bin/chmod
+ CHMOD=/bin/chmod
++ which mkdir
+ export MKDIR=/bin/mkdir
+ MKDIR=/bin/mkdir
++ which head
+ export HEAD=/usr/bin/head
+ HEAD=/usr/bin/head
++ which mv
+ export MV=/bin/mv
+ MV=/bin/mv
++ which paste
+ export PASTE=/usr/bin/paste
+ PASTE=/usr/bin/paste
++ which column
+ export COLUMN=/usr/bin/column
+ COLUMN=/usr/bin/column
+ export LOGS_DIR=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
+ LOGS_DIR=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
++ which cp
+ export COPY=/bin/cp
+ COPY=/bin/cp
++ which echo
+ export ECHO=/bin/echo
+ ECHO=/bin/echo
+ /bin/mkdir -p /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
+ /bin/chmod -R 755 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
+ '[' '!' -d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SQLBACKUP ']'
+ '[' 7 -ne 7 ']'
++ /usr/bin/psql -h rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com -p 5453 -U csingh1 -d cvrsamd
+ export 'TOTAL_SIZE_PERCENTAGE= capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
           88596 |       55424 |      62.56 |       33171
(1 row)'
+ TOTAL_SIZE_PERCENTAGE=' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
           88596 |       55424 |      62.56 |       33171
(1 row)'
++ echo ' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
           88596 |       55424 |      62.56 |       33171
(1 row)'
++ /bin/awk '{print $5}'
++ /usr/bin/tail -n2
++ /bin/cut -d. -f1
+ SIZE_USED_PERCENTAGE=62
++ echo ' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
           88596 |       55424 |      62.56 |       33171
(1 row)'
++ /bin/awk '{print $1}'
++ /usr/bin/tail -n2
++ /bin/cut -d. -f1
+ TOTAL_CLUSTER_SPACE='88596
(1'
++ echo ' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
           88596 |       55424 |      62.56 |       33171
(1 row)'
++ /bin/awk '{print $3}'
++ /usr/bin/tail -n2
++ /bin/cut -d. -f1
+ TOTAL_SPACE_USED=55424
+ echo 'The Total cluster capacity is 88596
(1 GB'
The Total cluster capacity is 88596
(1 GB
+ echo 'The used Cluster space is 55424 GB'
The used Cluster space is 55424 GB
+ echo 'The total used percentage is 62'
The total used percentage is 62
+ echo 'The threshold is 30'
The threshold is 30
+ '[' 62 -gt 30 ']'
+ echo 'Percentage is crossing threshold'
Percentage is crossing threshold
+ sql_creation_for_schema workmsmgr
++ which mv
+ export MOVE=/bin/mv
+ MOVE=/bin/mv
+ '[' -e /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql.bak ']'
++ /bin/sed -i.bak s/workmsmgr/workmsmgr/g /home/csingh1/EDMIK-275-NEW/NEW-REQUI
+ export CREAT_SQL_SCHEMA_CHECK=
+ CREAT_SQL_SCHEMA_CHECK=
+ '[' -e /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/schemasizecheck.sql.bak ']'
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql.bak /home/
+ export SEHEMAFILESQL=
+ SEHEMAFILESQL=
++ /bin/sed -i.bak s/workmsmgr/workmsmgr/g /home/csingh1/EDMIK-275-NEW/NEW-REQUI
+ export CREATE_SCHEMA_SIZE=
+ CREATE_SCHEMA_SIZE=
++ /usr/bin/psql -h rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com -p 5453
bash -x ./cluster_space_check.sh All+ CHECK_SPACE=
++ /usr/bin/psql -h rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com -p 5453 -U csingh1 -d cvrsamd --file=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/schemasizecheck.sql
+ TOTAL_SIZE_OF_SCHEMA=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.workmsmgr.schemasize
++ /bin/sed 1,2d
++ /bin/sed '/^\s*$/d'
++ /bin/awk '{print $3}'
+ REMOVE_TOP_LINES_OF_SCHEMA=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.workmsmgr.schemasize.clean
+ TOTAL_SIZE_OF_SCHEMA=1146732
+ echo 'The total Size of Schema is 1146732'
The total Size of Schema is 1146732
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $9}'
+ REMOVE_TOP_LINES=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.records
++ /bin/sed '/^\s*$/d'
+ REMOVE_BLANK_LINES=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $5}'
+ TABLE_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename
++ /bin/sed '/^\s*$/d'
+ TABLE_NAME=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename
+ TABLE_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $7}'
+ SCHEMA_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname
++ /bin/sed '/^\s*$/d'
+ SCHEMA_NAME=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname
+ SCHEMA_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $17}'
+ TOTAL_TABLE_SPACE_GB=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb
++ /bin/sed '/^\s*$/d'
+ TOTAL_TABLE_SPACE_GB=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb
+ TOTAL_TABLE_SPACE_GB=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $19}'
+ TOTAL_TABLE_SPACE_BYTES=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
++ /bin/sed '/^\s*$/d'
+ TOTAL_TABLE_SPACE_BYTES=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
+ TOTAL_TABLE_SPACE_GB=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.updated
++ /usr/bin/uniq -c
+ COUNT_RECORDS_FOR_ID=
++ /usr/bin/column -s ' ' -t
++ /usr/bin/paste -d, /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.updated /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
+ CREATE_JOINT_FILE=
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv
+ INSERT_HEADING=
++ /usr/bin/paste /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.updated /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
++ /usr/bin/column -s ' ' -t
+ CREATE_TEXT_FILE=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 3 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 3 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -3 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -3 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo cnryusr,sessions_track,workmsmgr,0,738197504
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo cnryusr,lkp_canary_table,workmsmgr,0,268435456
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo cnryusr,randy00,workmsmgr,0,335544320
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cnryusr.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,0'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,1146732'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 3 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 3 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,3d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,3d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,3d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 1146732 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamd workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cnryusr.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv cnryusr 1146732
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello cnryusr
Attached is report for AM/CMS rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamd database and workmsmgr Schema. The Total size of schema workmsmgr is 1146732.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cnryusr.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 1 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 1 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -1 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -1 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo cvadmin,test_vacuum_full_t1_1,workmsmgr,0,58720256
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvadmin.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,0'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,1146732'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 1 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 1 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,1d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,1d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,1d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 1146732 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamd workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvadmin.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv cvadmin 1146732
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello cvadmin
Attached is report for AM/CMS rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamd database and workmsmgr Schema. The Total size of schema workmsmgr is 1146732.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvadmin.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 13 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 13 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -13 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -13 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo cvamjobusr,nlnw_test_aggr_2,workmsmgr,905,972139003904
+ let total_space=total_space+905
+ read value
+ read -r -a linecontent
+ echo cvamjobusr,ed_test_te7,workmsmgr,18,20333985792
+ let total_space=total_space+18
+ read value
+ read -r -a linecontent
+ echo cvamjobusr,ed_test_te5,workmsmgr,5,6106906624
+ let total_space=total_space+5
+ read value
+ read -r -a linecontent
+ echo cvamjobusr,ed_test_te4,workmsmgr,3,3288334336
+ let total_space=total_space+3
+ read value
+ read -r -a linecontent
+ echo cvamjobusr,ed_test_te6,workmsmgr,2,2483027968
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo cvamjobusr,ed_test1_day_part,workmsmgr,1,1610612736
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo cvamjobusr,ed_test1,workmsmgr,1,1342177280
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo cvamjobusr,ed_test,workmsmgr,0,268435456
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo cvamjobusr,ed_test_te8,workmsmgr,0,402653184
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo cvamjobusr,ed_test_te2,workmsmgr,0,1006632960
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo cvamjobusr,ed_test1_network_count,workmsmgr,0,469762048
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo cvamjobusr,ed_test_te3,workmsmgr,0,603979776
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo cvamjobusr,ed_test_te1,workmsmgr,0,603979776
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvamjobusr.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,935'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,1146732'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 13 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 13 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,13d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,13d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,13d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 1146732 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamd workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvamjobusr.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv cvamjobusr 1146732
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello cvamjobusr
Attached is report for AM/CMS rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamd database and workmsmgr Schema. The Total size of schema workmsmgr is 1146732.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvamjobusr.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 3 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 3 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -3 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -3 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo cvtabusr,randy_period_qtr,workmsmgr,0,18874368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo cvtabusr,rk_avg_net_bcast,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo cvtabusr,national_ad_ingest_load_test,workmsmgr,0,0
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvtabusr.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,0'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,1146732'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 3 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 3 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,3d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,3d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,3d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 1146732 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamd workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvtabusr.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv cvtabusr 1146732
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello cvtabusr
Attached is report for AM/CMS rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamd database and workmsmgr Schema. The Total size of schema workmsmgr is 1146732.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvtabusr.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 1 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 1 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -1 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -1 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo kbudidha,evd_test_1,workmsmgr,0,230686720
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/kbudidha.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,0'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,1146732'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 1 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 1 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,1d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,1d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,1d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 1146732 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamd workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/kbudidha.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv kbudidha 1146732
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello kbudidha
Attached is report for AM/CMS rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamd database and workmsmgr Schema. The Total size of schema workmsmgr is 1146732.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/kbudidha.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 5 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 5 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -5 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -5 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo rsadmin,viewership_segments_master_bkp_01_22_2016,workmsmgr,11,12336496640
+ let total_space=total_space+11
+ read value
+ read -r -a linecontent
+ echo rsadmin,viewership_segments_master_nztmp,workmsmgr,11,12280922112
+ let total_space=total_space+11
+ read value
+ read -r -a linecontent
+ echo rsadmin,viewership_segments_master_bkp_20160108,workmsmgr,9,10658775040
+ let total_space=total_space+9
+ read value
+ read -r -a linecontent
+ echo rsadmin,hh_insertable_segments_master_nztmp,workmsmgr,5,5415895040
+ let total_space=total_space+5
+ read value
+ read -r -a linecontent
+ echo rsadmin,optimum_networks_feed_dec15andjan16,workmsmgr,0,872415232
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsadmin.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,36'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,1146732'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 5 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 5 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,5d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,5d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,5d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 1146732 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamd workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsadmin.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv rsadmin 1146732
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello rsadmin
Attached is report for AM/CMS rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamd database and workmsmgr Schema. The Total size of schema workmsmgr is 1146732.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsadmin.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 7 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 7 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -7 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -7 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo sadhikes,t3n4,workmsmgr,65,69793218560
+ let total_space=total_space+65
+ read value
+ read -r -a linecontent
+ echo sadhikes,t3n3,workmsmgr,47,50667192320
+ let total_space=total_space+47
+ read value
+ read -r -a linecontent
+ echo sadhikes,t3n2,workmsmgr,17,19058917376
+ let total_space=total_space+17
+ read value
+ read -r -a linecontent
+ echo sadhikes,t3n6,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo sadhikes,t3n5,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo sadhikes,t_d_top30_network_reach,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo sadhikes,t3n1,workmsmgr,0,402653184
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/sadhikes.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,129'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,1146732'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 7 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 7 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,7d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,7d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,7d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 1146732 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamd workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/sadhikes.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv sadhikes 1146732
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello sadhikes
Attached is report for AM/CMS rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamd database and workmsmgr Schema. The Total size of schema workmsmgr is 1146732.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/sadhikes.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 22 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 22 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -22 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -22 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_callsign_cluster,workmsmgr,0,6291456
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,tap_programming_list_first_run_master,workmsmgr,0,872415232
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_segment_genre_2014_51cluster,workmsmgr,0,178257920
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,optimum_networks_feed_mar16,workmsmgr,0,13631488
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_networkgroup_51segment_2014,workmsmgr,0,325058560
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,insertable_segments,workmsmgr,0,414187520
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_segment_segmentcode_2014_51cluster,workmsmgr,0,183500800
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,optimum_networks_feed_mar16_decrypt,workmsmgr,0,0
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_insertable_network_clusters,workmsmgr,0,69206016
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_music_choice_network_genre,workmsmgr,0,110100480
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,cluster_segments_dec12_jan13,workmsmgr,0,469762048
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,optimum_networks_feed_apr16_decrypt_chc,workmsmgr,0,0
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_segment_genre_2014_a,workmsmgr,0,183500800
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,ins_segments_codes,workmsmgr,0,469762048
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,ins_segments_codes_6b,workmsmgr,0,469762048
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,optimum_networks_feed_mar16_decrypt_chc,workmsmgr,0,0
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,cohort_codes,workmsmgr,0,5242880
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,insertable_segments_channel_xref,workmsmgr,0,786432000
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_segment_channel,workmsmgr,0,335544320
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_segment_similar_51segments_2013_2014,workmsmgr,0,183500800
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,segments_and_genre_name,workmsmgr,0,610271232
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,optimum_networks_feed_apr16_decrypt,workmsmgr,0,0
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/workmsmgr.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,0'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,1146732'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 22 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 22 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,22d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,22d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,22d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 1146732 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamd workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/workmsmgr.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv workmsmgr 1146732
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello workmsmgr
Attached is report for AM/CMS rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamd database and workmsmgr Schema. The Total size of schema workmsmgr is 1146732.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/workmsmgr.rsamd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ IFS=:
+ read -r -a myArray
+ echo ./cluster_space_check.sh 'Server_Name, rs_user_name, rs_user_password, database_name, port_number, schema_name, threshold_warning_percentage'
./cluster_space_check.sh Server_Name, rs_user_name, rs_user_password, database_name, port_number, schema_name, threshold_warning_percentage
+ echo ./cluster_space_check.sh tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com csingh1 CSingh_d3v tapp2d 5447 workmsmgr 30
./cluster_space_check.sh tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com csingh1 CSingh_d3v tapp2d 5447 workmsmgr 30
+ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/space_check.sh tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com csingh1 CSingh_d3v tapp2d 5447 workmsmgr 30
+ export SERVER_NAME=tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com
+ SERVER_NAME=tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export USER_NAME=csingh1
+ USER_NAME=csingh1
+ export PASS_WORD=CSingh_d3v
+ PASS_WORD=CSingh_d3v
+ export DB_NAME=tapp2d
+ DB_NAME=tapp2d
++ which psql
+ export PSQL=/usr/bin/psql
+ PSQL=/usr/bin/psql
++ which awk
+ export AWK=/bin/awk
+ AWK=/bin/awk
+ export SERVER_PORT=5447
+ SERVER_PORT=5447
++ which mail
+ export MAIL=/bin/mail
+ MAIL=/bin/mail
+ export PGPASSWORD=CSingh_d3v
+ PGPASSWORD=CSingh_d3v
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
++ which tail
+ export TAIL=/usr/bin/tail
+ TAIL=/usr/bin/tail
++ which cut
+ export CUT=/bin/cut
+ CUT=/bin/cut
+ export THRESHOLD=30
+ THRESHOLD=30
+ export SCHEMA_NAME=workmsmgr
+ SCHEMA_NAME=workmsmgr
++ which sed
+ export SED=/bin/sed
+ SED=/bin/sed
++ which chmod
+ export CHMOD=/bin/chmod
+ CHMOD=/bin/chmod
++ which mkdir
+ export MKDIR=/bin/mkdir
+ MKDIR=/bin/mkdir
++ which head
+ export HEAD=/usr/bin/head
+ HEAD=/usr/bin/head
++ which mv
+ export MV=/bin/mv
+ MV=/bin/mv
++ which paste
+ export PASTE=/usr/bin/paste
+ PASTE=/usr/bin/paste
++ which column
+ export COLUMN=/usr/bin/column
+ COLUMN=/usr/bin/column
+ export LOGS_DIR=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
+ LOGS_DIR=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
++ which cp
+ export COPY=/bin/cp
+ COPY=/bin/cp
++ which echo
+ export ECHO=/bin/echo
+ ECHO=/bin/echo
+ /bin/mkdir -p /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
+ /bin/chmod -R 755 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
+ '[' '!' -d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SQLBACKUP ']'
+ '[' 7 -ne 7 ']'
++ /usr/bin/psql -h tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com -p 5447 -U csingh1 -d tapp2d
+ export 'TOTAL_SIZE_PERCENTAGE= capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
            1116 |         477 |      42.73 |         639
(1 row)'
+ TOTAL_SIZE_PERCENTAGE=' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
            1116 |         477 |      42.73 |         639
(1 row)'
++ echo ' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
            1116 |         477 |      42.73 |         639
(1 row)'
++ /bin/awk '{print $5}'
++ /usr/bin/tail -n2
++ /bin/cut -d. -f1
+ SIZE_USED_PERCENTAGE=42
++ echo ' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
            1116 |         477 |      42.73 |         639
(1 row)'
++ /bin/awk '{print $1}'
++ /usr/bin/tail -n2
++ /bin/cut -d. -f1
+ TOTAL_CLUSTER_SPACE='1116
(1'
++ echo ' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
            1116 |         477 |      42.73 |         639
(1 row)'
++ /bin/awk '{print $3}'
++ /usr/bin/tail -n2
++ /bin/cut -d. -f1
+ TOTAL_SPACE_USED=477
+ echo 'The Total cluster capacity is 1116
(1 GB'
The Total cluster capacity is 1116
(1 GB
+ echo 'The used Cluster space is 477 GB'
The used Cluster space is 477 GB
+ echo 'The total used percentage is 42'
The total used percentage is 42
+ echo 'The threshold is 30'
The threshold is 30
+ '[' 42 -gt 30 ']'
+ echo 'Percentage is crossing threshold'
Percentage is crossing threshold
+ sql_creation_for_schema workmsmgr
++ which mv
+ export MOVE=/bin/mv
+ MOVE=/bin/mv
+ '[' -e /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql.bak ']'
++ /bin/sed -i.bak s/workmsmgr/workmsmgr/g /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql
+ export CREAT_SQL_SCHEMA_CHECK=
+ CREAT_SQL_SCHEMA_CHECK=
+ '[' -e /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/schemasizecheck.sql.bak ']'
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql.bak /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql
+ export SEHEMAFILESQL=
+ SEHEMAFILESQL=
++ /bin/sed -i.bak s/workmsmgr/workmsmgr/g /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/schemasizecheck.sql
+ export CREATE_SCHEMA_SIZE=
+ CREATE_SCHEMA_SIZE=
++ /usr/bin/psql -h tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com -p 5447 -U csingh1 -d tapp2d --file=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql
+ CHECK_SPACE=
++ /usr/bin/psql -h tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com -p 5447 -U csingh1 -d tapp2d --file=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/schemasizecheck.sql
+ TOTAL_SIZE_OF_SCHEMA=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.workmsmgr.schemasize
++ /bin/sed 1,2d
++ /bin/sed '/^\s*$/d'
++ /bin/awk '{print $3}'
+ REMOVE_TOP_LINES_OF_SCHEMA=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.workmsmgr.schemasize.clean
+ TOTAL_SIZE_OF_SCHEMA=
+ echo 'The total Size of Schema is '
The total Size of Schema is
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $9}'
+ REMOVE_TOP_LINES=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.records
++ /bin/sed '/^\s*$/d'
+ REMOVE_BLANK_LINES=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $5}'
+ TABLE_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename
++ /bin/sed '/^\s*$/d'
+ TABLE_NAME=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename
+ TABLE_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $7}'
+ SCHEMA_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname
++ /bin/sed '/^\s*$/d'
+ SCHEMA_NAME=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname
+ SCHEMA_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $17}'
+ TOTAL_TABLE_SPACE_GB=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb
++ /bin/sed '/^\s*$/d'
+ TOTAL_TABLE_SPACE_GB=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb
+ TOTAL_TABLE_SPACE_GB=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $19}'
+ TOTAL_TABLE_SPACE_BYTES=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
++ /bin/sed '/^\s*$/d'
+ TOTAL_TABLE_SPACE_BYTES=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
+ TOTAL_TABLE_SPACE_GB=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.updated
++ /usr/bin/uniq -c
+ COUNT_RECORDS_FOR_ID=
++ /usr/bin/column -s ' ' -t
++ /usr/bin/paste -d, /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.updated /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
+ CREATE_JOINT_FILE=
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv
+ INSERT_HEADING=
++ /usr/bin/column -s ' ' -t
++ /usr/bin/paste /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.updated /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tappdev.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
+ CREATE_TEXT_FILE=
+ IFS=' '
+ read -r -a myRecArray
+ IFS=:
+ read -r -a myArray
+ echo ./cluster_space_check.sh 'Server_Name, rs_user_name, rs_user_password, database_name, port_number, schema_name, threshold_warning_percentage'
./cluster_space_check.sh Server_Name, rs_user_name, rs_user_password, database_name, port_number, schema_name, threshold_warning_percentage
+ echo ./cluster_space_check.sh rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com csingh1 CSingh_d3v cvrsbisd 5441 workmsmgr 30
./cluster_space_check.sh rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com csingh1 CSingh_d3v cvrsbisd 5441 workmsmgr 30
+ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/space_check.sh rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com csingh1 CSingh_d3v cvrsbisd 5441 workmsmgr 30
+ export SERVER_NAME=rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com
+ SERVER_NAME=rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export USER_NAME=csingh1
+ USER_NAME=csingh1
+ export PASS_WORD=CSingh_d3v
+ PASS_WORD=CSingh_d3v
+ export DB_NAME=cvrsbisd
+ DB_NAME=cvrsbisd
++ which psql
+ export PSQL=/usr/bin/psql
+ PSQL=/usr/bin/psql
++ which awk
+ export AWK=/bin/awk
+ AWK=/bin/awk
+ export SERVER_PORT=5441
+ SERVER_PORT=5441
++ which mail
+ export MAIL=/bin/mail
+ MAIL=/bin/mail
+ export PGPASSWORD=CSingh_d3v
+ PGPASSWORD=CSingh_d3v
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
++ which tail
+ export TAIL=/usr/bin/tail
+ TAIL=/usr/bin/tail
++ which cut
+ export CUT=/bin/cut
+ CUT=/bin/cut
+ export THRESHOLD=30
+ THRESHOLD=30
+ export SCHEMA_NAME=workmsmgr
+ SCHEMA_NAME=workmsmgr
++ which sed
+ export SED=/bin/sed
+ SED=/bin/sed
++ which chmod
+ export CHMOD=/bin/chmod
+ CHMOD=/bin/chmod
++ which mkdir
+ export MKDIR=/bin/mkdir
+ MKDIR=/bin/mkdir
++ which head
+ export HEAD=/usr/bin/head
+ HEAD=/usr/bin/head
++ which mv
+ export MV=/bin/mv
+ MV=/bin/mv
++ which paste
+ export PASTE=/usr/bin/paste
+ PASTE=/usr/bin/paste
++ which column
+ export COLUMN=/usr/bin/column
+ COLUMN=/usr/bin/column
+ export LOGS_DIR=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
+ LOGS_DIR=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
++ which cp
+ export COPY=/bin/cp
+ COPY=/bin/cp
++ which echo
+ export ECHO=/bin/echo
+ ECHO=/bin/echo
+ /bin/mkdir -p /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
+ /bin/chmod -R 755 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
+ '[' '!' -d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SQLBACKUP ']'
+ '[' 7 -ne 7 ']'
++ /usr/bin/psql -h rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com -p 5441 -U csingh1 -d cvrsbisd
+ export 'TOTAL_SIZE_PERCENTAGE= capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
           33484 |       20344 |      60.76 |       13140
(1 row)'
+ TOTAL_SIZE_PERCENTAGE=' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
           33484 |       20344 |      60.76 |       13140
(1 row)'
++ echo ' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
           33484 |       20344 |      60.76 |       13140
(1 row)'
++ /bin/awk '{print $5}'
++ /usr/bin/tail -n2
++ /bin/cut -d. -f1
+ SIZE_USED_PERCENTAGE=60
++ echo ' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
           33484 |       20344 |      60.76 |       13140
(1 row)'
++ /bin/awk '{print $1}'
++ /usr/bin/tail -n2
++ /bin/cut -d. -f1
+ TOTAL_CLUSTER_SPACE='33484
(1'
++ echo ' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
           33484 |       20344 |      60.76 |       13140
(1 row)'
++ /bin/awk '{print $3}'
++ /usr/bin/tail -n2
++ /bin/cut -d. -f1
+ TOTAL_SPACE_USED=20344
+ echo 'The Total cluster capacity is 33484
(1 GB'
The Total cluster capacity is 33484
(1 GB
+ echo 'The used Cluster space is 20344 GB'
The used Cluster space is 20344 GB
+ echo 'The total used percentage is 60'
The total used percentage is 60
+ echo 'The threshold is 30'
The threshold is 30
+ '[' 60 -gt 30 ']'
+ echo 'Percentage is crossing threshold'
Percentage is crossing threshold
+ sql_creation_for_schema workmsmgr
++ which mv
+ export MOVE=/bin/mv
+ MOVE=/bin/mv
+ '[' -e /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql.bak ']'
++ /bin/sed -i.bak s/workmsmgr/workmsmgr/g /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql
+ export CREAT_SQL_SCHEMA_CHECK=
+ CREAT_SQL_SCHEMA_CHECK=
+ '[' -e /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/schemasizecheck.sql.bak ']'
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql.bak /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql
+ export SEHEMAFILESQL=
+ SEHEMAFILESQL=
++ /bin/sed -i.bak s/workmsmgr/workmsmgr/g /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/schemasizecheck.sql
+ export CREATE_SCHEMA_SIZE=
+ CREATE_SCHEMA_SIZE=
++ /usr/bin/psql -h rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com -p 5441 -U csingh1 -d cvrsbisd --file=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql
+ CHECK_SPACE=
++ /usr/bin/psql -h rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com -p 5441 -U csingh1 -d cvrsbisd --file=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/schemasizecheck.sql
+ TOTAL_SIZE_OF_SCHEMA=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.workmsmgr.schemasize
++ /bin/sed 1,2d
++ /bin/sed '/^\s*$/d'
++ /bin/awk '{print $3}'
+ REMOVE_TOP_LINES_OF_SCHEMA=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.workmsmgr.schemasize.clean
+ TOTAL_SIZE_OF_SCHEMA=
+ echo 'The total Size of Schema is '
The total Size of Schema is
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $9}'
+ REMOVE_TOP_LINES=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.records
++ /bin/sed '/^\s*$/d'
+ REMOVE_BLANK_LINES=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $5}'
+ TABLE_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename
++ /bin/sed '/^\s*$/d'
+ TABLE_NAME=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename
+ TABLE_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $7}'
+ SCHEMA_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname
++ /bin/sed '/^\s*$/d'
+ SCHEMA_NAME=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname
+ SCHEMA_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $17}'
+ TOTAL_TABLE_SPACE_GB=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb
++ /bin/sed '/^\s*$/d'
+ TOTAL_TABLE_SPACE_GB=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb
+ TOTAL_TABLE_SPACE_GB=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $19}'
+ TOTAL_TABLE_SPACE_BYTES=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
++ /bin/sed '/^\s*$/d'
+ TOTAL_TABLE_SPACE_BYTES=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
+ TOTAL_TABLE_SPACE_GB=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.updated
++ /usr/bin/uniq -c
+ COUNT_RECORDS_FOR_ID=
++ /usr/bin/paste -d, /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.updated /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
++ /usr/bin/column -s ' ' -t
+ CREATE_JOINT_FILE=
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv
+ INSERT_HEADING=
++ /usr/bin/column -s ' ' -t
++ /usr/bin/paste /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.updated /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsbisd1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
+ CREATE_TEXT_FILE=
+ IFS=' '
+ read -r -a myRecArray
+ IFS=:
+ read -r -a myArray
+ echo ./cluster_space_check.sh 'Server_Name, rs_user_name, rs_user_password, database_name, port_number, schema_name, threshold_warning_percentage'
./cluster_space_check.sh Server_Name, rs_user_name, rs_user_password, database_name, port_number, schema_name, threshold_warning_percentage
+ echo ./cluster_space_check.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com csingh1 CSingh_u4t cvrsamt 5453 workmsmgr 30
./cluster_space_check.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com csingh1 CSingh_u4t cvrsamt 5453 workmsmgr 30
+ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/space_check.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com csingh1 CSingh_u4t cvrsamt 5453 workmsmgr 30
+ export SERVER_NAME=rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com
+ SERVER_NAME=rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export USER_NAME=csingh1
+ USER_NAME=csingh1
+ export PASS_WORD=CSingh_u4t
+ PASS_WORD=CSingh_u4t
+ export DB_NAME=cvrsamt
+ DB_NAME=cvrsamt
++ which psql
+ export PSQL=/usr/bin/psql
+ PSQL=/usr/bin/psql
++ which awk
+ export AWK=/bin/awk
+ AWK=/bin/awk
+ export SERVER_PORT=5453
+ SERVER_PORT=5453
++ which mail
+ export MAIL=/bin/mail
+ MAIL=/bin/mail
+ export PGPASSWORD=CSingh_u4t
+ PGPASSWORD=CSingh_u4t
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
++ which tail
+ export TAIL=/usr/bin/tail
+ TAIL=/usr/bin/tail
++ which cut
+ export CUT=/bin/cut
+ CUT=/bin/cut
+ export THRESHOLD=30
+ THRESHOLD=30
+ export SCHEMA_NAME=workmsmgr
+ SCHEMA_NAME=workmsmgr
++ which sed
+ export SED=/bin/sed
+ SED=/bin/sed
++ which chmod
+ export CHMOD=/bin/chmod
+ CHMOD=/bin/chmod
++ which mkdir
+ export MKDIR=/bin/mkdir
+ MKDIR=/bin/mkdir
++ which head
+ export HEAD=/usr/bin/head
+ HEAD=/usr/bin/head
++ which mv
+ export MV=/bin/mv
+ MV=/bin/mv
++ which paste
+ export PASTE=/usr/bin/paste
+ PASTE=/usr/bin/paste
++ which column
+ export COLUMN=/usr/bin/column
+ COLUMN=/usr/bin/column
+ export LOGS_DIR=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
+ LOGS_DIR=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
++ which cp
+ export COPY=/bin/cp
+ COPY=/bin/cp
++ which echo
+ export ECHO=/bin/echo
+ ECHO=/bin/echo
+ /bin/mkdir -p /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
+ /bin/chmod -R 755 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
+ '[' '!' -d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SQLBACKUP ']'
+ '[' 7 -ne 7 ']'
++ /usr/bin/psql -h rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com -p 5453 -U csingh1 -d cvrsamt
+ export 'TOTAL_SIZE_PERCENTAGE= capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
          177192 |      124718 |      70.39 |       52473
(1 row)'
+ TOTAL_SIZE_PERCENTAGE=' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
          177192 |      124718 |      70.39 |       52473
(1 row)'
++ echo ' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
          177192 |      124718 |      70.39 |       52473
(1 row)'
++ /bin/awk '{print $5}'
++ /usr/bin/tail -n2
++ /bin/cut -d. -f1
+ SIZE_USED_PERCENTAGE=70
++ echo ' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
          177192 |      124718 |      70.39 |       52473
(1 row)'
++ /bin/awk '{print $1}'
++ /usr/bin/tail -n2
++ /bin/cut -d. -f1
+ TOTAL_CLUSTER_SPACE='177192
(1'
++ echo ' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
          177192 |      124718 |      70.39 |       52473
(1 row)'
++ /bin/awk '{print $3}'
++ /usr/bin/tail -n2
++ /bin/cut -d. -f1
+ TOTAL_SPACE_USED=124718
+ echo 'The Total cluster capacity is 177192
(1 GB'
The Total cluster capacity is 177192
(1 GB
+ echo 'The used Cluster space is 124718 GB'
The used Cluster space is 124718 GB
+ echo 'The total used percentage is 70'
The total used percentage is 70
+ echo 'The threshold is 30'
The threshold is 30
+ '[' 70 -gt 30 ']'
+ echo 'Percentage is crossing threshold'
Percentage is crossing threshold
+ sql_creation_for_schema workmsmgr
++ which mv
+ export MOVE=/bin/mv
+ MOVE=/bin/mv
+ '[' -e /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql.bak ']'
++ /bin/sed -i.bak s/workmsmgr/workmsmgr/g /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql
+ export CREAT_SQL_SCHEMA_CHECK=
+ CREAT_SQL_SCHEMA_CHECK=
+ '[' -e /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/schemasizecheck.sql.bak ']'
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql.bak /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql
+ export SEHEMAFILESQL=
+ SEHEMAFILESQL=
++ /bin/sed -i.bak s/workmsmgr/workmsmgr/g /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/schemasizecheck.sql
+ export CREATE_SCHEMA_SIZE=
+ CREATE_SCHEMA_SIZE=
++ /usr/bin/psql -h rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com -p 5453 -U csingh1 -d cvrsamt --file=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql
+ CHECK_SPACE=
++ /usr/bin/psql -h rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com -p 5453 -U csingh1 -d cvrsamt --file=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/schemasizecheck.sql
+ TOTAL_SIZE_OF_SCHEMA=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.workmsmgr.schemasize
++ /bin/sed 1,2d
++ /bin/sed '/^\s*$/d'
++ /bin/awk '{print $3}'
+ REMOVE_TOP_LINES_OF_SCHEMA=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.workmsmgr.schemasize.clean
+ TOTAL_SIZE_OF_SCHEMA=2374150
+ echo 'The total Size of Schema is 2374150'
The total Size of Schema is 2374150
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $9}'
+ REMOVE_TOP_LINES=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.records
++ /bin/sed '/^\s*$/d'
+ REMOVE_BLANK_LINES=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $5}'
+ TABLE_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename
++ /bin/sed '/^\s*$/d'
+ TABLE_NAME=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename
+ TABLE_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $7}'
+ SCHEMA_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname
++ /bin/sed '/^\s*$/d'
+ SCHEMA_NAME=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname
+ SCHEMA_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $17}'
+ TOTAL_TABLE_SPACE_GB=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb
++ /bin/sed '/^\s*$/d'
+ TOTAL_TABLE_SPACE_GB=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb
+ TOTAL_TABLE_SPACE_GB=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $19}'
+ TOTAL_TABLE_SPACE_BYTES=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
++ /bin/sed '/^\s*$/d'
+ TOTAL_TABLE_SPACE_BYTES=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
+ TOTAL_TABLE_SPACE_GB=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.updated
++ /usr/bin/uniq -c
+ COUNT_RECORDS_FOR_ID=
++ /usr/bin/column -s ' ' -t
++ /usr/bin/paste -d, /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.updated /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
+ CREATE_JOINT_FILE=
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv
+ INSERT_HEADING=
++ /usr/bin/column -s ' ' -t
++ /usr/bin/paste /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.updated /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
+ CREATE_TEXT_FILE=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 3 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 3 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -3 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -3 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo cnryusr,sessions_track,workmsmgr,0,80740352
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo cnryusr,lkp_canary_table,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo cnryusr,randy00,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cnryusr.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,0'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,2374150'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 3 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 3 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,3d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,3d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,3d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 2374150 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamt workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cnryusr.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv cnryusr 2374150
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello cnryusr
Attached is report for AM/CMS rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamt database and workmsmgr Schema. The Total size of schema workmsmgr is 2374150.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cnryusr.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 1 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 1 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -1 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -1 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo cvadmin,test_vacuum_full_t1_1,workmsmgr,0,954204160
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvadmin.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,0'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,2374150'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 1 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 1 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,1d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,1d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,1d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 2374150 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamt workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvadmin.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv cvadmin 2374150
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello cvadmin
Attached is report for AM/CMS rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamt database and workmsmgr Schema. The Total size of schema workmsmgr is 2374150.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvadmin.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 3 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 3 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -3 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -3 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo cvamjobusr,test2,workmsmgr,1,1342177280
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo cvamjobusr,test1,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo cvamjobusr,t_tapp2_d_nw_grp_decentrix_temp,workmsmgr,0,167772160
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvamjobusr.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,1'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,2374150'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 3 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 3 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,3d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,3d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,3d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 2374150 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamt workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvamjobusr.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv cvamjobusr 2374150
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello cvamjobusr
Attached is report for AM/CMS rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamt database and workmsmgr Schema. The Total size of schema workmsmgr is 2374150.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvamjobusr.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 4 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 4 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -4 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -4 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo cvtabusr,pnp_footer_text,workmsmgr,0,5242880
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo cvtabusr,rk_avg_networks_adzone,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo cvtabusr,channel_type_parent_agg,workmsmgr,0,723517440
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo cvtabusr,daypart_labels,workmsmgr,0,12582912
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvtabusr.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,0'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,2374150'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 4 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 4 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,4d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,4d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,4d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 2374150 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamt workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvtabusr.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv cvtabusr 2374150
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello cvtabusr
Attached is report for AM/CMS rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamt database and workmsmgr Schema. The Total size of schema workmsmgr is 2374150.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/cvtabusr.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 21 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 21 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -21 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -21 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo hsingh5,kate_past_viewers_1_3,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,morning_joe_past_viewers,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,kate_recent_viewers_4_v,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,gold_rush_lapsed_viewers11,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,tlc_viewers,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,morning_joe_viewers,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,active_table_2015,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,kate_lapsed_viewers11_v,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,gold_rush_past_viewers_1_5,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,gold_rush_lapsed_viewers1,workmsmgr,0,0
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,kate_recent_viewers_4,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,gold_rush_past_viewers_1_5_v,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,kate_lapsed_viewers11,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,gold_rush_recent_viewers_6,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,discovery_viewers,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,gold_rush_lapsed_viewers11_v,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,tlc_viewers_v,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,discovery_viewers_v,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,gold_rush_recent_viewers_6_v,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,gold_rush_lapsed_viewers,workmsmgr,0,0
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo hsingh5,msnbc_viewers,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/hsingh5.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,0'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,2374150'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 21 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 21 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,21d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,21d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,21d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 2374150 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamt workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/hsingh5.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv hsingh5 2374150
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello hsingh5
Attached is report for AM/CMS rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamt database and workmsmgr Schema. The Total size of schema workmsmgr is 2374150.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/hsingh5.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 17 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 17 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -17 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -17 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo jkrishna,tv_mstr_tuning_smpl_qnique_stb_list,workmsmgr,2,2684354560
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo jkrishna,tv_strat_sampling_table_ak,workmsmgr,2,2550136832
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo jkrishna,tv_x_data_smpl,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo jkrishna,tv_past_data_smpl,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo jkrishna,tv_imp_data_smpl,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo jkrishna,tv_percent_strat_ak,workmsmgr,1,2013265920
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo jkrishna,tv_percent_strat_ak5,workmsmgr,1,2013265920
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo jkrishna,tv_weightage,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo jkrishna,tv_mstr_tuning_20160112_20160122_smpl2,workmsmgr,1,1207959552
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo jkrishna,tv_percent_strat_ak1,workmsmgr,1,2013265920
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo jkrishna,tv_mstr_tuning_20160112_20160122_smpl,workmsmgr,1,1207959552
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo jkrishna,tv_mstr_tuning_20160112_20160122_smpl1,workmsmgr,1,1207959552
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo jkrishna,tv_percent_data_smpl,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo jkrishna,tv_imputed_stb_list,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo jkrishna,tv_device_map,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo jkrishna,di_qnique_stb_list,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo jkrishna,tv_channel_desctemp,workmsmgr,0,572522496
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/jkrishna.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,14'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,2374150'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 17 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 17 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,17d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,17d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,17d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 2374150 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamt workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/jkrishna.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv jkrishna 2374150
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello jkrishna
Attached is report for AM/CMS rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamt database and workmsmgr Schema. The Total size of schema workmsmgr is 2374150.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/jkrishna.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 194 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 194 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -194 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -194 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo ktseng,vikings_unreal_s1_s1_vod,workmsmgr,798,857517064192
+ let total_space=total_space+798
+ read value
+ read -r -a linecontent
+ echo ktseng,all_nov_2015_live_dvr_tuning,workmsmgr,256,275414777856
+ let total_space=total_space+256
+ read value
+ read -r -a linecontent
+ echo ktseng,all_live_dvr_vod_tuning_comb,workmsmgr,169,182267674624
+ let total_space=total_space+169
+ read value
+ read -r -a linecontent
+ echo ktseng,all_live_dvr_vod,workmsmgr,140,150860726272
+ let total_space=total_space+140
+ read value
+ read -r -a linecontent
+ echo ktseng,all_live_60_sec,workmsmgr,135,145800298496
+ let total_space=total_space+135
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_ad_time_tuning,workmsmgr,8,8724152320
+ let total_space=total_space+8
+ read value
+ read -r -a linecontent
+ echo ktseng,mnf_hh_segment_stg,workmsmgr,7,7784628224
+ let total_space=total_space+7
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_demo_hispanic_g,workmsmgr,6,6845104128
+ let total_space=total_space+6
+ read value
+ read -r -a linecontent
+ echo ktseng,nfl_wildcard_hh_segment_stg,workmsmgr,6,7247757312
+ let total_space=total_space+6
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_demo_hispanic_g,workmsmgr,6,6845104128
+ let total_space=total_space+6
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_demo,workmsmgr,6,6576668672
+ let total_space=total_space+6
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_nov_2015_live_dvr_tuning,workmsmgr,5,5502926848
+ let total_space=total_space+5
+ read value
+ read -r -a linecontent
+ echo ktseng,nov_2015_mrdvr_rs,workmsmgr,5,5368709120
+ let total_space=total_space+5
+ read value
+ read -r -a linecontent
+ echo ktseng,knicks_multi_game,workmsmgr,4,4966055936
+ let total_space=total_space+4
+ read value
+ read -r -a linecontent
+ echo ktseng,mnf_914_tuning,workmsmgr,4,4966055936
+ let total_space=total_space+4
+ read value
+ read -r -a linecontent
+ echo ktseng,cfp_bowl,workmsmgr,4,4966055936
+ let total_space=total_space+4
+ read value
+ read -r -a linecontent
+ echo ktseng,cfb_priority2,workmsmgr,4,4966055936
+ let total_space=total_space+4
+ read value
+ read -r -a linecontent
+ echo ktseng,nfl_wildcard,workmsmgr,4,4966055936
+ let total_space=total_space+4
+ read value
+ read -r -a linecontent
+ echo ktseng,cfb_priority1,workmsmgr,4,4966055936
+ let total_space=total_space+4
+ read value
+ read -r -a linecontent
+ echo ktseng,cfp_champ,workmsmgr,4,4966055936
+ let total_space=total_space+4
+ read value
+ read -r -a linecontent
+ echo ktseng,rangers_multi_game,workmsmgr,4,4966055936
+ let total_space=total_space+4
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_football_ad_exposed,workmsmgr,3,3221225472
+ let total_space=total_space+3
+ read value
+ read -r -a linecontent
+ echo ktseng,nov_2015_mrdvr,workmsmgr,3,4160749568
+ let total_space=total_space+3
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_live_dvr_vod_tuning_comb,workmsmgr,3,3892314112
+ let total_space=total_space+3
+ read value
+ read -r -a linecontent
+ echo ktseng,msg_knicks_rangers_universe_exposure_tuned_f,workmsmgr,3,3221225472
+ let total_space=total_space+3
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_live_dvr_vod,workmsmgr,2,3087007744
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo ktseng,all_vod,workmsmgr,2,3087007744
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_live_dvr_tuning,workmsmgr,2,2550136832
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo ktseng,msg_knicks_rangers_universe_exposure_tuned,workmsmgr,2,2147483648
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_live_60_sec,workmsmgr,2,3087007744
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo ktseng,unreal_s1_live_dvr_tuning,workmsmgr,2,2550136832
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo ktseng,wahlburger_s4_live_dvr_tuning,workmsmgr,2,2550136832
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo ktseng,cf_opening_weekend_hh_segment_stg,workmsmgr,2,2952790016
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo ktseng,bates_motel_s1_live_dvr_tuning,workmsmgr,2,2550136832
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_mrdvr_all,workmsmgr,2,2147483648
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo ktseng,mrdvr_all,workmsmgr,2,2147483648
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo ktseng,cfb_bowl_hh_segment_stg,workmsmgr,2,2818572288
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_live_dvr_vod_tuning_comb,workmsmgr,2,2147483648
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo ktseng,vikings_unreal_s1_live_dvr_tuning,workmsmgr,2,2550136832
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_segment_hh_exposed_tuned_f,workmsmgr,2,2171600896
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo ktseng,bates_motel_s1_live_35,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,unreal_vod_35,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,unreal_s1_live_dvr_vod,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,msg_knicks_rangers_ad_spots_universe,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,big_cat_hh_exposure_tuned_flag_network,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_all_campaign_segment,workmsmgr,1,1207959552
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_iodvr,workmsmgr,1,2013265920
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,big_cat_hh_exposed_conversion,workmsmgr,1,1207959552
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,msg_knicks_rangers_universe_exposure,workmsmgr,1,1879048192
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_segment_hh_exposed,workmsmgr,1,1768947712
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,tuning_of_all_episode_hh,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_mrdvr_f_hhkey,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,college_football_games,workmsmgr,1,1207959552
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,fox_empire_s2_live_dvr_tuning,workmsmgr,1,2013265920
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,all_iodvr,workmsmgr,1,1476395008
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,unreal_s1_vod,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,freq_distro_stg,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_mrdvr,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,big_cat_all_hh_exposure_network,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_tuning_comb_stg_ep,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,bates_motel_s1_live_dvr_vod_35,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,big_cat_nyi_campaign_hh_exposure_network_stg,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_vod,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,big_cat_live_dvr_vod,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_tuning_combo,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,quantico_s1_s2_hh,workmsmgr,1,1342177280
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,msg_knicks_rangers_ad_spots,workmsmgr,1,1610612736
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,fox_empire_hh_exposed_converted_f,workmsmgr,1,1207959552
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_nov_2015_live_min,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,big_cat_nyi_campaign_hh_exposure_stg,workmsmgr,1,1476395008
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,unreal_s1_live_dvr_vod_35,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,fox_empire_s2_live_dvr_vod,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_live_dvr_vod_wk,workmsmgr,1,1879048192
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,fox_empire_campaign_hh_exposure,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,nfl_games,workmsmgr,1,1123024896
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,wahlburger_s4_live_dvr_vod,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,bates_motel_s1_live_dvr_vod,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_live_60_sec,workmsmgr,1,2013265920
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_live_dvr_vod,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,fox_empire_campaign_hh_exposure_network_stg,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,wahlburger_s4_vod,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_mrdvr,workmsmgr,1,1879048192
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_tuning_combo_ep,workmsmgr,1,1207959552
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,fox_empire_campaign_hh_exposure_stg,workmsmgr,1,1476395008
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,empire_c4_one_instance,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,fox_empire_s2_vod,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,sec_by_sec_tuning,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,big_cat_hh_exposure_tuned_network,workmsmgr,1,1342177280
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,bates_motel_s1_vod,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,fox_empire_hh_exposed_converted,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,big_cat_nyi_campaign_hh_exposure,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_tuning_combo,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,all_tuning_combo,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_vod_binge,workmsmgr,1,1879048192
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,bates_motel_s1_vod_35,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_vod,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,big_cat_hh_exposure_tuned,workmsmgr,1,1207959552
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,msg_knicks_rangers_ad_exposure,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,msg_month_universe_f,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_sec_by_sec,workmsmgr,1,1610612736
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,big_cat_hh_exposed_conversion_network,workmsmgr,1,1342177280
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_segment_hh_exposed_tuned,workmsmgr,1,1903165440
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,natgeo_live_dvr_tuning,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_iodvr,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo ktseng,cf_opening_weekend_hh_list,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_dvr_hh_segment,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,fox_empire_s2_c3_c4_dvr_vod_list_zones,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_football_ad_log2,workmsmgr,0,198180864
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,empire_custom_segment_episodes_watched,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_repeat_hh_tuning_type_viewer,workmsmgr,0,6291456
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,fox_empire_s2_c4_hh_list,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_nfl_wildcard_segment_final,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,quantico_time_table,workmsmgr,0,5242880
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_live_hh_segment,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_combined_segment,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_finale_hh_segment,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,unreal_seq_live_35,workmsmgr,0,7340032
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_cf_opening_weekend_segment_final,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_football_ad_time_window,workmsmgr,0,264241152
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,quantico_s2_hh,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_campaign_ad_exposure_agg,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,msg_month_universe,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_vod_hh_segment,workmsmgr,0,372244480
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_cf_playoff,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,fox_empire_s2_c3_c4_dvr_vod_list,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_viewer_group,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_live_fr_hh_segment,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,empire_segment_converted,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,unreal_all_season_sequence_hh_cnt_35,workmsmgr,0,7340032
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_combined_segment,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,fox_empire_hh_exposed,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_live_hh_segment,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,msg_knicks_rangers_multi_game,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_new_hh_tuning_type_viewer,workmsmgr,0,6291456
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_nfl_wildcard_hml,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,quantico_s1_hh,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,unreal_seq_vod_35,workmsmgr,0,7340032
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_football_ad_log,workmsmgr,0,84934656
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,hook_v3_first_tuned_date_wahlburger,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,big_cat_vod,workmsmgr,0,311427072
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,hook_v3_hhid_first_ep_total_tuned,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,empire_custom_segment_c3_c4_window,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,hook_v3_hhid_first_ep_unreal_total_tuned,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,c3_c4_window,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,hook_v3_first_tuned_date_ep_stg,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_break_times2,workmsmgr,0,11534336
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,sec_by_sec_time,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_tuned_hh,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_mnf_segment_final,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_hut_month,workmsmgr,0,4194304
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,mnf_promo_hh_list,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,big_cat_hh_exposure,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,hook_v3_first_tuned_date_unreal,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,hook_v3_first_tuned_date,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,quantico_hut,workmsmgr,0,10485760
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,tms_program_table_lookup,workmsmgr,0,190840832
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_vod_hh_segment,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,fox_empire_hh_exposure,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,cf_playoff_hh_list,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_nfl_mnf_hml,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_cf_opening_weekend_hml,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_hut_weekly,workmsmgr,0,5242880
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,big_cat_week_program,workmsmgr,0,6291456
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,all_tuning_comb_stg,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_hut,workmsmgr,0,5242880
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_repeat_hh_tuning_viewer,workmsmgr,0,5242880
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,big_cat_hh_exposure_tuned_flag_first_day,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,hook_v3_hhid_first_ep_wahlburger_total_tuned,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,abcf_quantico_breaks,workmsmgr,0,18874368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,hook_v3_first_tuned,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,bates_motel_all_season_sequence_hh_cnt,workmsmgr,0,7340032
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,t_demo_profile_lite_ethnics,workmsmgr,0,6291456
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,fox_empire_exposed_converted_single_network,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_universe_hh_list,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_cf_playoff_segment_final,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,discovery_vid_agg_hhid,workmsmgr,0,0
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,nov_2015_universe_hh_list,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_tuning_comb_stg,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,nfl_wildcard_hh_list,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,msg_knicks_rangers_universe_game_combo,workmsmgr,0,6291456
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_tuning_comb_stg,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_viewer_group,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,discovery_vid_agg,workmsmgr,0,0
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,nat_geo_big_cat_custom_segment,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,tuned_to_all_ep_hh,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,espn_dvr_hh_segment,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,hook_v3_first_tuned_date_wahlburger_ep_stg,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,active_hh_big_cat,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,hook_v3_first_tuned_date_unreal_ep_stg,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,big_cat_hh_exposure_tuned_flag,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,abc_quantico_new_hh_tuning_viewer,workmsmgr,0,5242880
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,bates_motel_all_season_sequence_hh_cnt_35,workmsmgr,0,7340032
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,bates_motel_seq_vod_35,workmsmgr,0,7340032
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo ktseng,big_cat_all_hh_exposure,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/ktseng.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,1685'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,2374150'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 194 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 194 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,194d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,194d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,194d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 2374150 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamt workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/ktseng.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv ktseng 2374150
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello ktseng
Attached is report for AM/CMS rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamt database and workmsmgr Schema. The Total size of schema workmsmgr is 2374150.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/ktseng.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 2 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 2 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -2 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -2 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo nsahay,sports_d_0,workmsmgr,1,1879048192
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo nsahay,sports_region_zone,workmsmgr,0,176160768
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/nsahay.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,1'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,2374150'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 2 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 2 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,2d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,2d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,2d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 2374150 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamt workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/nsahay.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv nsahay 2374150
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello nsahay
Attached is report for AM/CMS rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamt database and workmsmgr Schema. The Total size of schema workmsmgr is 2374150.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/nsahay.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 42 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 42 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -42 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -42 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo pronga,demo_prog_index_new,workmsmgr,44,47863300096
+ let total_space=total_space+44
+ read value
+ read -r -a linecontent
+ echo pronga,raw_vod_playback_seachange,workmsmgr,33,35836133376
+ let total_space=total_space+33
+ read value
+ read -r -a linecontent
+ echo pronga,raw_vod_playback_2,workmsmgr,24,26038239232
+ let total_space=total_space+24
+ read value
+ read -r -a linecontent
+ echo pronga,default_channel_box_on,workmsmgr,18,19730006016
+ let total_space=total_space+18
+ read value
+ read -r -a linecontent
+ echo pronga,raw_vod_playback,workmsmgr,16,17716740096
+ let total_space=total_space+16
+ read value
+ read -r -a linecontent
+ echo pronga,default_channel_box_on_first,workmsmgr,7,7658799104
+ let total_space=total_space+7
+ read value
+ read -r -a linecontent
+ echo pronga,box_on_dtms,workmsmgr,3,4160749568
+ let total_space=total_space+3
+ read value
+ read -r -a linecontent
+ echo pronga,vod_hh_final,workmsmgr,2,3087007744
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo pronga,dvr_programs_by_minute_3,workmsmgr,2,2684354560
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo pronga,dvr_programs_by_minute_2,workmsmgr,2,2147483648
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo pronga,vod_genre_mapped,workmsmgr,2,2684354560
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo pronga,vod_base_hh,workmsmgr,2,2281701376
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo pronga,schedule_test,workmsmgr,1,1879048192
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo pronga,msg_knicks_rangers_ad_spots_qc,workmsmgr,1,1610612736
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo pronga,vod_titles,workmsmgr,1,1207959552
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo pronga,trumpless_debate_tuning_window,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo pronga,debate_pod_view,workmsmgr,1,1879048192
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo pronga,dvr_programs_by_minute,workmsmgr,1,1879048192
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo pronga,debate_pod_view_stage,workmsmgr,1,1610612736
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo pronga,dvr_rate_codes,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,odl_hh_viewers_sessions,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,gh_live_viewership,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,yearly_pca_scoring_master_peter,workmsmgr,0,367001600
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,wfn_hh_viewers_sessions,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,t_d_newsletter_program_list_v1,workmsmgr,0,591396864
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,fox_debate_ad_pods,workmsmgr,0,9437184
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,perf_spss_agg,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,spss_segments_stage,workmsmgr,0,0
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,odl_hh_viewers_base,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,heavy_vod_decliners,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,dvr_viewing_base,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,wfn_hh_viewers_base,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,seachnage_list_a,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,heavy_vod_heavies,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,dvr_viewing_decliners,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,t_d_newsletter_demo_v1,workmsmgr,0,37748736
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,value_hh_by_month,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,spmn_hh_viewers_sessions,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,spmn_hh_viewers_base,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,tap_program_xref,workmsmgr,0,167772160
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,nwsltr_political_programs,workmsmgr,0,490733568
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo pronga,disco_vod_2015,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/pronga.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,162'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,2374150'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 42 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 42 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,42d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,42d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,42d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 2374150 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamt workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/pronga.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv pronga 2374150
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello pronga
Attached is report for AM/CMS rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamt database and workmsmgr Schema. The Total size of schema workmsmgr is 2374150.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/pronga.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 4 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 4 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -4 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -4 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo rsadmin,viewership_segments_master_bkp_01_22_2016,workmsmgr,12,12889096192
+ let total_space=total_space+12
+ read value
+ read -r -a linecontent
+ echo rsadmin,viewership_segments_master_nztmp,workmsmgr,11,12750684160
+ let total_space=total_space+11
+ read value
+ read -r -a linecontent
+ echo rsadmin,viewership_segments_master_bkp_20160108,workmsmgr,10,11127488512
+ let total_space=total_space+10
+ read value
+ read -r -a linecontent
+ echo rsadmin,hh_insertable_segments_master_nztmp,workmsmgr,5,5637144576
+ let total_space=total_space+5
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsadmin.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,38'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,2374150'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 4 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 4 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,4d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,4d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,4d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 2374150 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamt workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsadmin.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv rsadmin 2374150
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello rsadmin
Attached is report for AM/CMS rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamt database and workmsmgr Schema. The Total size of schema workmsmgr is 2374150.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsadmin.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 14 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 14 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -14 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -14 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo spssmodel,hh_network_aggr_viewing_hrs,workmsmgr,51,55566139392
+ let total_space=total_space+51
+ read value
+ read -r -a linecontent
+ echo spssmodel,hh_network_aggr_viewing,workmsmgr,51,55566139392
+ let total_space=total_space+51
+ read value
+ read -r -a linecontent
+ echo spssmodel,aggregate_viewing,workmsmgr,8,8858370048
+ let total_space=total_space+8
+ read value
+ read -r -a linecontent
+ echo spssmodel,viewership_segments_master,workmsmgr,6,6461325312
+ let total_space=total_space+6
+ read value
+ read -r -a linecontent
+ echo spssmodel,top_programs_master,workmsmgr,4,4563402752
+ let total_space=total_space+4
+ read value
+ read -r -a linecontent
+ echo spssmodel,hh_insertable_segments_master,workmsmgr,2,2544893952
+ let total_space=total_space+2
+ read value
+ read -r -a linecontent
+ echo spssmodel,pricing_planning_cluster,workmsmgr,1,1879048192
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo spssmodel,yearly_pca_scoring_master,workmsmgr,1,1709178880
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo spssmodel,test,workmsmgr,0,10485760
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo spssmodel,ks_test1131048,workmsmgr,0,10485760
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo spssmodel,abc,workmsmgr,0,10485760
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo spssmodel,insertable_segment_scoring_master,workmsmgr,0,188743680
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo spssmodel,xyz,workmsmgr,0,0
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo spssmodel,xref_pricing_planning_cluster,workmsmgr,0,5242880
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/spssmodel.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,124'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,2374150'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 14 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 14 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,14d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,14d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,14d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 2374150 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamt workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/spssmodel.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv spssmodel 2374150
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello spssmodel
Attached is report for AM/CMS rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamt database and workmsmgr Schema. The Total size of schema workmsmgr is 2374150.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/spssmodel.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 111 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 111 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -111 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -111 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo vrengana,wabc_datg_subs_tier,workmsmgr,22,24293408768
+ let total_space=total_space+22
+ read value
+ read -r -a linecontent
+ echo vrengana,nov_bcast_mrdvr,workmsmgr,13,14495514624
+ let total_space=total_space+13
+ read value
+ read -r -a linecontent
+ echo vrengana,wabc_all_tv_box_stg,workmsmgr,10,10737418240
+ let total_space=total_space+10
+ read value
+ read -r -a linecontent
+ echo vrengana,window_viewing_abp_national_ads,workmsmgr,5,5637144576
+ let total_space=total_space+5
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_entmnt_viewers_stg1,workmsmgr,3,4026531840
+ let total_space=total_space+3
+ read value
+ read -r -a linecontent
+ echo vrengana,window_viewing_nhl_games,workmsmgr,3,4160749568
+ let total_space=total_space+3
+ read value
+ read -r -a linecontent
+ echo vrengana,nhl_game_viewed_stg2,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,nov_nletter,workmsmgr,1,1879048192
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_past_viewers_stg,workmsmgr,1,1207959552
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,nhl_flash,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,nhl_game_viewed_stg3,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,wabc_espn_demo_all,workmsmgr,1,1610612736
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_filters,workmsmgr,1,1073741824
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_active_universe,workmsmgr,1,1342177280
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,bp_entmnt_viewers_stg3,workmsmgr,1,1207959552
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,nhl_game_viewed_stg1,workmsmgr,1,1610612736
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,window_viewing_abp_dci_ads,workmsmgr,1,1342177280
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,nhl_game_viewed_stg4,workmsmgr,1,1342177280
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,window_viewing_abp_disc_ads,workmsmgr,1,1207959552
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,dgo_active_universe,workmsmgr,1,1342177280
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_genre_viewers_stg,workmsmgr,1,1342177280
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_past_yr_viewers_stg,workmsmgr,1,1207959552
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_vw_segments_stg,workmsmgr,1,1207959552
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_national_ads_viewed,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,wabc_datg_live_counts,workmsmgr,0,16777216
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_cms_or_national,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_dci_not_cms,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_cms_and_any_national,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_disc_grp,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,stanley_cup_stg1,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_disc_or_dci,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_disc_or_dci_or_national,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_disc_not_cms,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,q415_quintiles,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,np_ad_log,workmsmgr,0,109051904
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,nbcu_hail_stg,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_cms_not_dci,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,temp2,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,pf_linear_ads_viewed,workmsmgr,0,0
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_cms_or_any_national,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_cms_not_national,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_disc_grp_stg1,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_cms_and_national,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,nbcu_addr_universe,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_dci_ads,workmsmgr,0,51380224
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_cms_not_any_national,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_cms_and_disc,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_tv_grp,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,nbcu_hail_hh_list,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_vod_hhs,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,viks_addr_universe,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,viks_segments_1230,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,wabc_datg_espn_networks,workmsmgr,0,5242880
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_past_viewers,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_dci_ads_viewed_fd,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,nov15_quintiles,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,temp1,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,lg_linear_stg1,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,avg_networks_4q15,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_genre_grp_stg1,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_vod_hhs1,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_entmnt_viewers_stg4,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_cms_not_disc,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_dci_ads_viewed,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,dgo_ads_exposed,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_vw_segments,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,lg_vod_stg1,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_abp_grp_stg1,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,star_wars_hhs,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_cms_ads_exposed,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_cms_and_dci,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_disc_ads,workmsmgr,0,29360128
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_genre_prospects,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,q415_combined_quintiles,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_entmnt_viewers_stg2,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,musa_0120,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,msnbc_addr_universe,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_segments,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_past_yr_viewers,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abl_ly_tv,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_cms_or_disc,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,nhl_all_tv_duration,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_abp_grp_stg2,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_disc_ads_viewed_fd,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_non_viewers,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_abp_grp,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_national_ads_viewed_fd,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,msnbc_mj_last6mnths,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_analysis2_stg,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_any_national_not_cms,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,msnbc_last6mnths,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_genre_viewers_stg2,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_cms_or_dci,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_disc_ads_viewed,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,wabc_datg_live_counts_revised,workmsmgr,0,16777216
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_genre_grp,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,msnbc_mj_lastyr,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,wabc_subs_tier,workmsmgr,0,805306368
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_national_ads,workmsmgr,0,50331648
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,nbc_nn_lists,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_entmnt_prospects,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_tgt_ep,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,star_wars_hhs_2,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_addr_universe,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_tv_grp_stg1,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,stanley_cup_playoff_hhs,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,viks_seas3,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,abp_national_not_cms,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,lg_addr_universe,workmsmgr,0,536870912
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,viks_seas_1_2,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo vrengana,horror_counts_stg,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/vrengana.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,73'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,2374150'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 111 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 111 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,111d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,111d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,111d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 2374150 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamt workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/vrengana.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv vrengana 2374150
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello vrengana
Attached is report for AM/CMS rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamt database and workmsmgr Schema. The Total size of schema workmsmgr is 2374150.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/vrengana.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 18 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 18 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -18 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -18 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,tap_programming_list_first_run_master,workmsmgr,1,1744830464
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_segment_segmentcode_2014_51cluster,workmsmgr,0,230686720
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_segment_channel,workmsmgr,0,671088640
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,cohort_codes,workmsmgr,0,377487360
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,insertable_segments_q4,workmsmgr,0,73400320
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_networkgroup_51segment_2014,workmsmgr,0,618659840
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,cluster_segments_dec12_jan13,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_music_choice_network_genre,workmsmgr,0,125829120
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,ins_segments_codes,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_segment_similar_51segments_2013_2014,workmsmgr,0,214958080
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_callsign_cluster,workmsmgr,0,125829120
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,insertable_segments,workmsmgr,0,83886080
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_insertable_network_clusters,workmsmgr,0,75497472
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_segment_genre_2014_a,workmsmgr,0,225443840
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,ins_segments_codes_6b,workmsmgr,0,939524096
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,insertable_segments_channel_xref,workmsmgr,0,660602880
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,segments_and_genre_name,workmsmgr,0,1069547520
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo workmsmgr,xref_segment_genre_2014_51cluster,workmsmgr,0,225443840
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/workmsmgr.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,1'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,2374150'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 18 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 18 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,18d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,18d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,18d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 2374150 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamt workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/workmsmgr.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv workmsmgr 2374150
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello workmsmgr
Attached is report for AM/CMS rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamt database and workmsmgr Schema. The Total size of schema workmsmgr is 2374150.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/workmsmgr.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ echo 'Separating 4 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Separating 4 numbers of records from  /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /usr/bin/head -4 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /usr/bin/head -4 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ RECORD_SEPARATION_FOR_EMAIL=
+ echo ''

+ total_space=0
+ count=0
+ read value
+ read -r -a linecontent
+ echo wsabra,agentx_ad_time_tuning,workmsmgr,6,6576668672
+ let total_space=total_space+6
+ read value
+ read -r -a linecontent
+ echo wsabra,agentx_ad_exposed,workmsmgr,1,1476395008
+ let total_space=total_space+1
+ read value
+ read -r -a linecontent
+ echo wsabra,agentx_adlogs,workmsmgr,0,56623104
+ let total_space=total_space+0
+ read value
+ read -r -a linecontent
+ echo wsabra,agentx_ad_window,workmsmgr,0,62914560
+ let total_space=total_space+0
+ read value
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/wsabra.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv
+ INSERT_REPORT_HEADING=
++ /bin/echo ', ,Total Space Used,7'
+ INSERT_SPACE_REPORT=
++ /bin/echo ', ,Schema_Size,2374150'
+ INSERT_SCHEMA_SIZE=
+ echo 'Removing 4 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt'
Removing 4 records from file /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS//home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ echo /bin/sed -i 1,4d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
/bin/sed -i 1,4d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
++ /bin/sed -i 1,4d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.txt
+ REMOVE_FROM_FILE=
+ echo

+ echo 'send an email'
send an email
+ '[' 2374150 ']'
++ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/email_users_for_space.sh rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com cvrsamt workmsmgr /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/wsabra.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv wsabra 2374150
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
+ export MAIL_TO=csingh1@cablevision.com
+ MAIL_TO=csingh1@cablevision.com
+ export FROM=Space_watcher@cablevision.com
+ FROM=Space_watcher@cablevision.com
+ '[' 7 -ne 7 ']'
+ declare -a attachments
+ attachments=("$4" "$5")
+ declare -a attargs
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ for att in '"${attachments[@]}"'
+ attargs+=("-a" "$att")
+ echo -n 'Hello wsabra
Attached is report for AM/CMS rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com space report for the cvrsamt database and workmsmgr Schema. The Total size of schema workmsmgr is 2374150.
Please review your objects and remove any unnecessary to preserve free space on the Redshift Cluster.

Thanks
Admin Team'
+ /bin/cat /tmp/mailviews
+ /bin/mail -s ' AM/CMS WORKMSMGR (CVRSAMP) Space Report for rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com' -r Space_watcher@cablevision.com -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv -a /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/wsabra.rsamt1.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.report.csv csingh1@cablevision.com
+ SEND_EMAIL_TO_USER=
+ IFS=' '
+ read -r -a myRecArray
+ IFS=:
+ read -r -a myArray
+ echo ./cluster_space_check.sh 'Server_Name, rs_user_name, rs_user_password, database_name, port_number, schema_name, threshold_warning_percentage'
./cluster_space_check.sh Server_Name, rs_user_name, rs_user_password, database_name, port_number, schema_name, threshold_warning_percentage
+ echo ./cluster_space_check.sh tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com csingh1 CSingh_u4t tapp2t 5441 workmsmgr 30
./cluster_space_check.sh tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com csingh1 CSingh_u4t tapp2t 5441 workmsmgr 30
+ /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/space_check.sh tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com csingh1 CSingh_u4t tapp2t 5441 workmsmgr 30
+ export SERVER_NAME=tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com
+ SERVER_NAME=tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export USER_NAME=csingh1
+ USER_NAME=csingh1
+ export PASS_WORD=CSingh_u4t
+ PASS_WORD=CSingh_u4t
+ export DB_NAME=tapp2t
+ DB_NAME=tapp2t
++ which psql
+ export PSQL=/usr/bin/psql
+ PSQL=/usr/bin/psql
++ which awk
+ export AWK=/bin/awk
+ AWK=/bin/awk
+ export SERVER_PORT=5441
+ SERVER_PORT=5441
++ which mail
+ export MAIL=/bin/mail
+ MAIL=/bin/mail
+ export PGPASSWORD=CSingh_u4t
+ PGPASSWORD=CSingh_u4t
++ which cat
+ export CAT=/bin/cat
+ CAT=/bin/cat
+ export MAILFILE=/tmp/mailviews
+ MAILFILE=/tmp/mailviews
++ which mail
+ export MAILER=/bin/mail
+ MAILER=/bin/mail
++ which tail
+ export TAIL=/usr/bin/tail
+ TAIL=/usr/bin/tail
++ which cut
+ export CUT=/bin/cut
+ CUT=/bin/cut
+ export THRESHOLD=30
+ THRESHOLD=30
+ export SCHEMA_NAME=workmsmgr
+ SCHEMA_NAME=workmsmgr
++ which sed
+ export SED=/bin/sed
+ SED=/bin/sed
++ which chmod
+ export CHMOD=/bin/chmod
+ CHMOD=/bin/chmod
++ which mkdir
+ export MKDIR=/bin/mkdir
+ MKDIR=/bin/mkdir
++ which head
+ export HEAD=/usr/bin/head
+ HEAD=/usr/bin/head
++ which mv
+ export MV=/bin/mv
+ MV=/bin/mv
++ which paste
+ export PASTE=/usr/bin/paste
+ PASTE=/usr/bin/paste
++ which column
+ export COLUMN=/usr/bin/column
+ COLUMN=/usr/bin/column
+ export LOGS_DIR=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
+ LOGS_DIR=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
++ which cp
+ export COPY=/bin/cp
+ COPY=/bin/cp
++ which echo
+ export ECHO=/bin/echo
+ ECHO=/bin/echo
+ /bin/mkdir -p /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
+ /bin/chmod -R 755 /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS
+ '[' '!' -d /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SQLBACKUP ']'
+ '[' 7 -ne 7 ']'
++ /usr/bin/psql -h tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com -p 5441 -U csingh1 -d tapp2t
+ export 'TOTAL_SIZE_PERCENTAGE= capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
             744 |         415 |      55.78 |         329
(1 row)'
+ TOTAL_SIZE_PERCENTAGE=' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
             744 |         415 |      55.78 |         329
(1 row)'
++ echo ' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
             744 |         415 |      55.78 |         329
(1 row)'
++ /bin/awk '{print $5}'
++ /usr/bin/tail -n2
++ /bin/cut -d. -f1
+ SIZE_USED_PERCENTAGE=55
++ echo ' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
             744 |         415 |      55.78 |         329
(1 row)'
++ /bin/awk '{print $1}'
++ /usr/bin/tail -n2
++ /bin/cut -d. -f1
+ TOTAL_CLUSTER_SPACE='744
(1'
++ echo ' capacity_gbytes | used_gbytes | pcnt_space | free_gbytes
-----------------+-------------+------------+-------------
             744 |         415 |      55.78 |         329
(1 row)'
++ /bin/awk '{print $3}'
++ /usr/bin/tail -n2
++ /bin/cut -d. -f1
+ TOTAL_SPACE_USED=415
+ echo 'The Total cluster capacity is 744
(1 GB'
The Total cluster capacity is 744
(1 GB
+ echo 'The used Cluster space is 415 GB'
The used Cluster space is 415 GB
+ echo 'The total used percentage is 55'
The total used percentage is 55
+ echo 'The threshold is 30'
The threshold is 30
+ '[' 55 -gt 30 ']'
+ echo 'Percentage is crossing threshold'
Percentage is crossing threshold
+ sql_creation_for_schema workmsmgr
++ which mv
+ export MOVE=/bin/mv
+ MOVE=/bin/mv
+ '[' -e /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql.bak ']'
++ /bin/sed -i.bak s/workmsmgr/workmsmgr/g /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql
+ export CREAT_SQL_SCHEMA_CHECK=
+ CREAT_SQL_SCHEMA_CHECK=
+ '[' -e /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/schemasizecheck.sql.bak ']'
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql.bak /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql
+ export SEHEMAFILESQL=
+ SEHEMAFILESQL=
++ /bin/sed -i.bak s/workmsmgr/workmsmgr/g /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/schemasizecheck.sql
+ export CREATE_SCHEMA_SIZE=
+ CREATE_SCHEMA_SIZE=
++ /usr/bin/psql -h tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com -p 5441 -U csingh1 -d tapp2t --file=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/spacecheck.sql
+ CHECK_SPACE=
++ /usr/bin/psql -h tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com -p 5441 -U csingh1 -d tapp2t --file=/home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/schemasizecheck.sql
+ TOTAL_SIZE_OF_SCHEMA=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.workmsmgr.schemasize
++ /bin/sed 1,2d
++ /bin/sed '/^\s*$/d'
++ /bin/awk '{print $3}'
+ REMOVE_TOP_LINES_OF_SCHEMA=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.workmsmgr.schemasize.clean
+ TOTAL_SIZE_OF_SCHEMA=
+ echo 'The total Size of Schema is '
The total Size of Schema is
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $9}'
+ REMOVE_TOP_LINES=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.records
++ /bin/sed '/^\s*$/d'
+ REMOVE_BLANK_LINES=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $5}'
+ TABLE_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename
++ /bin/sed '/^\s*$/d'
+ TABLE_NAME=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename
+ TABLE_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $7}'
+ SCHEMA_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname
++ /bin/sed '/^\s*$/d'
+ SCHEMA_NAME=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname
+ SCHEMA_NAME=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $17}'
+ TOTAL_TABLE_SPACE_GB=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb
++ /bin/sed '/^\s*$/d'
+ TOTAL_TABLE_SPACE_GB=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb
+ TOTAL_TABLE_SPACE_GB=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput
++ /bin/sed 1,2d
++ /bin/awk '{print $19}'
+ TOTAL_TABLE_SPACE_BYTES=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
++ /bin/sed '/^\s*$/d'
+ TOTAL_TABLE_SPACE_BYTES=
++ /bin/mv /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes.clean /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
+ TOTAL_TABLE_SPACE_GB=
++ /bin/cat /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.updated
++ /usr/bin/uniq -c
+ COUNT_RECORDS_FOR_ID=
++ /usr/bin/column -s ' ' -t
++ /usr/bin/paste -d, /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.updated /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
+ CREATE_JOINT_FILE=
++ /bin/sed -i 1iUser_Name,Table_Name,Schema_Name,Total_Space_in_GB,Total_space_in_Bytes /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.table_information.csv
+ INSERT_HEADING=
++ /usr/bin/column -s ' ' -t
++ /usr/bin/paste /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.sqloutput.updated /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablename /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.schemaname /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceingb /home/csingh1/EDMIK-275-NEW/NEW-REQUIREMENT/SERVER_LOGS/tapp2uat.czfsgsdwh1wy.us-east-1.redshift.amazonaws.com.tablespaceinbytes
+ CREATE_TEXT_FILE=
+ IFS=' '
+ read -r -a myRecArray
+ IFS=:
+ read -r -a myArray
